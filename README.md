# 酒店文化AI顾问系统

## 项目简介

这是一个专为酒店选址提供AI顾问服务的网页应用，旨在通过AI技术挖掘酒店选址所在地的小众文化及故事，为酒店主题定制提供文化底蕴深厚的设计方案。

## 功能特点

### 1. 文化故事挖掘
- 输入酒店选址地址
- AI自动挖掘当地的小众文化和历史故事
- 以故事/文化为维度，分点展示

### 2. 主题选择
- 从挖掘的文化故事中，选择最感兴趣的3个点
- 实时显示已选择数量
- 直观的卡片式交互界面

### 3. 主题定制
- 对选中的3个文化主题进行延伸和细化
- 生成具有文化底蕴的酒店主题描述
- 古香古色的描述风格

### 4. 酒店设计灵感
- 基于选定的文化主题生成专业的酒店设计方案
- 包含色彩搭配、材质选择、照明设计、空间设计、体验设计五大维度
- 每个主题都有独特的设计理念和文化内涵
- 为英迪格酒店提供差异化的主题定位建议

### 5. 设计特色
- 采用 #00263a 主题色，体现酒店高端品质
- 古香古色的UI设计，符合文化主题
- 响应式布局，适配各种设备
- 流畅的动画效果和交互体验

## 技术栈

- **HTML5**: 页面结构
- **CSS3**: 样式设计（采用渐变、阴影、动画等现代CSS特性）
- **JavaScript**: 交互逻辑和数据处理
- **字体**: Noto Serif SC（标题）、Noto Sans SC（正文）

## 文件结构

```
页面demo/
├── index.html          # 主页面
├── styles.css          # 样式文件
├── js/                # JavaScript模块文件夹（重要！）
│   ├── config.js                  # 全局配置和变量
│   ├── db-analysis-documents.js   # 城市分析文档数据库
│   ├── db-story-themes.js         # 故事主题数据库
│   ├── db-detailed-stories.js     # 详细故事数据库
│   ├── db-design-inspirations.js  # 设计灵感数据库
│   ├── database.js.backup         # 原数据库文件备份
│   ├── utils.js                   # 工具函数
│   ├── formatters.js              # 格式化函数
│   ├── data-access.js             # 数据访问函数
│   ├── ui.js                      # 界面显示函数
│   ├── story-handlers.js          # 故事处理函数
│   ├── main-handler.js            # 核心业务逻辑
│   ├── design-inspiration.js      # 设计灵感功能
│   ├── main.js                    # 初始化启动代码
│   └── README.md                  # JavaScript文件说明文档
├── 代码拆分说明.md    # 代码拆分文档
├── 数据库拆分说明.md  # 数据库拆分文档
├── 测试步骤.md        # 测试指南
├── 使用指南.md        # 使用说明
└── README.md          # 项目说明（本文件）
```

### 🎉 最新改进：代码模块化拆分（v3.0 - v3.1）

#### 第一阶段拆分（v3.0）
原来的 `app.js` 文件有 **4579行代码**，拆分成了 **10个小文件**

#### 第二阶段拆分（v3.1）⭐ 新！
`database.js` 文件有 **4272行**，继续拆分成 **4个数据库文件**：

1. **db-analysis-documents.js** (~800行) - 城市分析文档
2. **db-story-themes.js** (~120行) - 故事主题
3. **db-detailed-stories.js** (~1380行) - 详细故事
4. **db-design-inspirations.js** (~2020行) - 设计灵感

#### 最终结果
现在共有 **13个功能文件**：
- 1个配置文件（config.js）
- 4个数据库文件（db-*.js）
- 7个功能文件（utils, formatters, ui等）
- 1个启动文件（main.js）

**拆分优点：**
- ✅ 每个文件都不超过2100行，容易管理
- ✅ 添加新城市数据时，只需修改对应的数据库文件
- ✅ 数据和逻辑完全分离，结构清晰
- ✅ 代码组织更合理，便于维护和扩展

详细的文件说明请查看 [js/README.md](js/README.md)

## 使用方法

### 完整的6步流程

#### 步骤1：用户输入酒店选址
在输入框中输入酒店选址地址，例如：
- 长沙湘江中路
- 哈尔滨中央大街

或点击快捷按钮快速选择。

#### 步骤2：AI顾问分析并输出区域分析报告
系统自动分析当地的历史、文化、经济、人文等信息，生成详细的**区域分析报告**，显示在右侧文档面板中。

#### 步骤3：用户确认通过区域分析报告
查看区域分析报告后，点击**"确认通过"**按钮，表示认可分析结果。

#### 步骤4：AI顾问输出提炼的故事主题
系统基于区域分析，提炼出8个文化主题，以卡片形式展示，每个主题包含：
- 主题名称
- 副标题
- 核心元素
- 文化描述

#### 步骤5：用户选择3个主题
从8个主题中选择最感兴趣的**3个主题**（必须恰好3个），系统会实时显示已选数量。

#### 步骤6：生成邻间故事设计文档
选择完成后，点击**"生成邻间故事文档"**按钮，系统生成完整的**邻间故事设计文档**，包括：
- **综合主线故事**：融合3个主题的核心叙事
- **主题展开故事**：每个主题的深入描述
- **酒店设计灵感**：基于主题的专业设计方案

文档显示在右侧面板，可通过导航按钮切换不同部分查看。

## 系统工作原理

### 数据流程
1. **输入** → 用户输入地址（如"长沙湘江中路"或"哈尔滨中央大街"）
2. **检索** → 系统从`db-analysis-documents.js`中检索对应城市的区域分析文档
3. **确认** → 用户确认区域分析后，从`db-story-themes.js`中获取该城市的8个故事主题
4. **选择** → 用户选择3个主题后,系统:
   - 从`db-detailed-stories.js`中获取**综合主线故事**(`_combinedStories`)
   - 获取每个主题的**展开故事**(`expandedStory`)
   - 从`db-design-inspirations.js`中获取每个主题的**设计灵感**
5. **展示** → 格式化后显示完整的邻间故事设计文档

### 关键技术点
- **模块化设计**: 13个JavaScript文件,职责清晰,易于维护
- **数据与逻辑分离**: 4个数据库文件独立管理,业务逻辑在单独文件中
- **Markdown渲染**: `formatters.js`将Markdown格式转换为精美的HTML展示
- **响应式交互**: 实时反馈用户操作,流畅的动画效果

## 预设数据

系统内置了两个城市共16个主题的文化故事数据和完整的酒店设计灵感：

### 长沙（8个主题）
- 枫声夜语：千载红枫见证的未眠诗行
- 青砖呼吸录：书院砖石记载的千年问答
- 雾江光书：荧光笔尖绘就的刹那史诗
- 舟语茶韵：渡轮茶局承载的江湖密语
- 声墙迷径：麻石巷里封存的世纪回响
- 桥洞星野：水泥褶皱里的神话再生
- 渔火星辞：乌篷船上的方言诗典
- 碑影沉香：蝌蚪文镌刻的治水哲思

### 哈尔滨中央大街（8个主题）
- 穹顶回响录：铸铁音符在巴洛克褶皱中流淌
- 匠心如磐：方石竖纹里的寒地生存哲学
- 暗码维新：木窗棂划痕中的情报风云
- 冰刃生花：窗棂霜刃雕刻的生存美学
- 钢轨纹章：枕木年轮里的国际商埠密码
- 穹光纪事：彩绘玻璃里的移民史诗
- 砌缝春秋：勾缝剂里的百年微生物图谱
- 冻土纹身：冰雪在建筑肌体刻绘时光年轮


## 扩展说明

### 接入真实AI API
当前版本使用预设数据进行演示。如需接入真实AI API，可以修改 `app.js` 中的以下部分：

1. **文化故事挖掘**：将 `getCulturalStories()` 函数改为调用AI API
2. **主题生成**：将 `generateThemeDescription()` 函数改为调用AI API

示例代码结构：
```javascript
async function getCulturalStories(location) {
    const response = await fetch('/api/analyze-location', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ location })
    });
    return await response.json();
}
```

### 添加更多城市数据
在 `app.js` 的 `culturalStoriesDB` 对象中添加新的城市数据即可。

## 浏览器兼容性

- Chrome (推荐)
- Firefox
- Safari
- Edge

## 设计理念

1. **文化传承**：通过挖掘当地文化，为酒店注入文化灵魂
2. **用户体验**：简洁直观的界面，流畅的交互体验
3. **视觉设计**：古香古色的设计风格，体现文化底蕴
4. **专业性**：专业的主题定制方案，为酒店提供差异化定位

## 最新更新

### v3.1 - 数据库文件二次拆分 (2025年11月) ⭐ 最新
- ✅ **数据库优化**：将4272行的database.js拆分成4个独立数据库文件
- ✅ **精细分类**：按数据类型分为城市分析、故事主题、详细故事、设计灵感
- ✅ **文件精简**：最大的文件从4272行降至2020行，更易管理
- ✅ **结构说明**：每个数据库文件都有详细的数据结构注释
- ✅ **易于扩展**：添加新城市数据时，只需修改对应数据库文件
- ✅ **保留备份**：原database.js重命名为database.js.backup
- ✅ **文档更新**：更新所有相关文档说明新的文件结构

### v3.0 - JavaScript代码模块化拆分 (2025年11月)
- ✅ **代码重构**：将4579行的app.js拆分成10个功能模块文件
- ✅ **可维护性提升**：每个文件职责单一，代码组织更清晰
- ✅ **新增文档**：添加js/README.md详细说明每个文件的作用
- ✅ **加载优化**：按顺序加载模块，确保依赖关系正确
- ✅ **注释完善**：每个文件都添加了详细的中文注释和说明
- ✅ **向后兼容**：保留原app.js文件作为备份
- ✅ **学习友好**：适合初学者理解和学习的代码结构

### v2.7 - 16个主题完整酒店设计灵感体系 (2025年10月)
- ✅ **完整设计灵感体系**：为长沙8个主题和哈尔滨8个主题共16个主题完善了酒店设计灵感
- ✅ **五维度设计方案**：每个主题包含色彩搭配、材质选择、照明设计、空间设计、体验设计五大维度
- ✅ **长沙主题补充**：新增桥洞星野、渔火星辞、碑影沉香三个主题的设计灵感
- ✅ **哈尔滨主题完善**：为穹顶回响录、匠心如磐、暗码维新等8个主题添加专业设计方案
- ✅ **文化内涵深化**：每个设计方案都深度结合主题文化特色，提供差异化酒店定位建议
- ✅ **专业性提升**：设计灵感涵盖建筑、室内、体验等多个专业领域，为英迪格酒店提供全方位指导

### v2.6 - 哈尔滨中央大街完整故事体系构建 (2025年10月)
- ✅ **哈尔滨故事数据库创建**：成功为哈尔滨中央大街创建完整的详细邻间故事数据库
- ✅ **八个主题故事完成**：全面添加穹顶回响录、匠心如磐、暗码维新、冰刃生花、钢轨纹章、穹光纪事、砌缝春秋、冻土纹身八个精美故事
- ✅ **寒地文化深度挖掘**：深入探索哈尔滨独特的寒地建筑文化、工匠精神、革命历史和自然美学
- ✅ **多维度文化表达**：从建筑声学到微生物生态，从历史密码到冰雪艺术，全方位展现哈尔滨文化特色
- ✅ **国际商埠特色呈现**：突出哈尔滨作为"东方莫斯科"的多元文化融合特质和国际商埠历史

### v2.5 - 雾江光书故事内容深度更新 (2025年10月)
- ✅ **雾江光书故事完善**：全面更新长沙-枫声夜语主题下的"雾江光书"详细故事内容
- ✅ **三个小故事整合**：完美融合"江雾书痕"、"雾网星图"、"石巷声窖"三个精美小故事
- ✅ **荧光诗意表达**：以荧光笔书写为核心意象，营造刹那与永恒交织的诗意氛围
- ✅ **湘江文化挖掘**：深度展现湘江堤岸、渔网星图、麻石巷弄等长沙特色文化元素
- ✅ **声景艺术融合**：创新性地将声音景观与视觉艺术结合，打造多维度的文化体验

### v2.4 - 青砖呼吸录故事内容深度更新 (2025年10月)
- ✅ **故事内容丰富**：完善了长沙-枫声夜语主题下的"青砖呼吸录"详细故事内容
- ✅ **结构优化**：将主故事和三个小故事完美整合，包含"暮阶凝思"、"苔笺密语"、"影壁玄机"
- ✅ **文学表达提升**：采用更加诗意化和富有文化底蕴的表达方式，深度挖掘岳麓书院的历史文化内涵
- ✅ **时空交融**：巧妙融合古代书院文化与现代生活场景，营造穿越时空的文化体验
- ✅ **感官描写增强**：通过视觉、触觉、听觉等多重感官描写，增强故事的沉浸感和代入感

### v2.3 - 区域分析报告排版优化 (2025年10月)
- ✅ **智能文本解析**：全面重构`formatMarkdownContent`函数，支持复杂内容结构解析
- ✅ **层级标题优化**：区分中文序号标题（一、二、三）和数字标题（1. 2. 3.），提供不同视觉样式
- ✅ **内容分组增强**：添加列表组织功能，相关列表项自动组织成视觉组
- ✅ **智能标记系统**：实现时间、朝代、人名、地名、引用文献的自动识别和标记
- ✅ **安全替换机制**：使用`safeReplace`函数避免HTML标签内部的错误替换
- ✅ **视觉层次提升**：添加内容分隔符、特殊段落样式、悬停效果等视觉元素
- ✅ **响应式优化**：针对移动端设备优化标记元素的显示效果

### v2.2 - 哈尔滨故事主题深度更新 (2025年10月)
- ✅ **故事主题升级**：将哈尔滨中央大街的6个基础主题升级为8个深度文化主题
- ✅ **诗意表达增强**：每个主题都采用诗意化的标题和副标题，如"穹顶回响录"、"匠心如磐"等
- ✅ **文化内涵深化**：从建筑声学、工匠精神、革命密码、寒地美学等多维度挖掘文化内涵
- ✅ **灵感来源明确**：每个主题都明确标注具体的灵感来源，增强文化底蕴的可信度
- ✅ **主题数量扩展**：从原有6个主题扩展到8个主题，提供更丰富的选择空间

### v2.1 - 哈尔滨中央大街案例更新 (2025年10月)
- ✅ **案例替换**：将成都宽窄巷子案例替换为哈尔滨市道里区中央大街案例
- ✅ **内容丰富**：新增历史文化调研、人文底蕴调研、社区人文调研、周边酒店竞品调研、周边景点调研五大板块
- ✅ **主题更新**：更新哈尔滨特色文化主题，涵盖面包石路、马迭尔阳台、冰雪窗花、万国建筑、犹太商贾、松花江畔等
- ✅ **数据完整**：包含详细的历史人物、文化标志物、传统习俗、竞品酒店分析等内容

### v2.0 - Markdown文档展示优化 (2025年10月)
- ✅ **文档展示优化**：将原有的表格展示方式改为更加优雅的markdown文档格式
- ✅ **视觉体验提升**：采用卡片式布局，增强视觉层次和可读性
- ✅ **响应式设计**：优化移动端显示效果，支持各种屏幕尺寸
- ✅ **内容格式化**：支持markdown语法，包括标题、列表、粗体、斜体等格式
- ✅ **交互体验**：添加悬停效果和动画，提升用户体验

### 技术改进
- 新增 `formatMarkdownContent()` 函数，支持markdown语法解析
- 重构 `showDocumentContent()` 和 `showStoryDocumentContent()` 函数
- 添加完整的markdown文档CSS样式系统
- 优化响应式设计，支持768px和480px断点

## 未来规划

- [ ] 接入真实AI API，实现智能文化挖掘
- [ ] 添加更多城市的文化数据
- [ ] 支持图片和视频展示
- [ ] 添加PDF导出功能
- [ ] 支持多语言切换
- [ ] 添加用户反馈和评价系统
- [ ] 支持更多markdown语法（如表格、代码块等）
- [ ] 添加文档打印功能

## 联系方式

如有任何问题或建议，欢迎联系项目团队。

---

**英迪格酒店** - 每个邻里，都有故事

